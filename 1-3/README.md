Решение:
1) Разделяем данный паттерн по символу ?
2) Строим бор по паттернам без ?
3) Находим все вхождения паттернов алгоритмом Ахо-Корасика
4) Следим за тем, где начинается вхождение очередного паттерна без ? и за его вхождением в исходный паттерн
5) Если сложилась ситуация, когда i-ый подшаблон вошёл на позиции j, следующий за ним на позиции j - l_i + 1 
(где l_i - входжение i-ого подшаблона в шаблон), для всех подшаблонов, то значит мы нашли вхождение шаблона с ? в текст

Ахо-Корасик выполняется за время O(m+n+a), где n — длина шаблона, m — длина текста, a — количество появлений подстрок шаблона. 
Далее просто надо пробежаться по массиву, где записаны индексы вхождений подшаблонов, и просмотреть значения ячеек за время O(m).